---
title: Gegevens tolerantie voor Exchange Online in Microsoft 365
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: In dit artikel vindt u een beschrijving van de verschillende aspecten van gegevens tolerantie binnen Exchange Online en Microsoft 365.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: dfc53fd48a6de61cf47a0441cd2f8b0fa35a73f1
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/14/2020
ms.locfileid: "46695708"
---
# <a name="exchange-online-data-resiliency-in-microsoft-365"></a><span data-ttu-id="ae2ed-103">Gegevens tolerantie voor Exchange Online in Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="ae2ed-103">Exchange Online Data Resiliency in Microsoft 365</span></span>

<span data-ttu-id="ae2ed-104">Er zijn twee typen schade die van invloed kunnen zijn op een Exchange-database: fysiek beschadigd, die meestal wordt veroorzaakt door hardware (met name voor de opslag van hardware), en logische beschadiging, wat zich als gevolg van andere factoren voordoet.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-104">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors.</span></span> <span data-ttu-id="ae2ed-105">In het algemeen zijn er twee typen logische beschadiging die kunnen optreden in een Exchange-database:</span><span class="sxs-lookup"><span data-stu-id="ae2ed-105">Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span> 
- <span data-ttu-id="ae2ed-106">**Logische fout in database** : de controlesom van de databasepagina, maar de gegevens op de pagina zijn niet logisch.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-106">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically.</span></span> <span data-ttu-id="ae2ed-107">Dit kan gebeuren wanneer de database-engine (de Extensible Storage Engine) probeert een databasepagina te schrijven, terwijl het besturingssysteem een succes bericht retourneert, worden de gegevens niet naar de verkeerde plaats geschreven.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-107">This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place.</span></span> <span data-ttu-id="ae2ed-108">Dit wordt een *verloren flush*genoemd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-108">This is referred to as a *lost flush*.</span></span> <span data-ttu-id="ae2ed-109">ESE bevat diverse functies en beveiligingsfuncties die zijn ontworpen om fysiek beschadiging van een database en andere scenario's voor verlies van gegevens te voorkomen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-109">ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios.</span></span> <span data-ttu-id="ae2ed-110">Om te voorkomen dat u verloren gegane gegevens kwijtraakt, bevat ESE een verloren flush detectiemechanisme in de database, samen met een functie (herstel van één pagina) om de fout te corrigeren.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-110">To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span> 
- <span data-ttu-id="ae2ed-111">**Logische beschadiging opslaan** : gegevens worden toegevoegd, verwijderd of gemanipuleerd, zodat de gebruiker dat niet verwacht.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-111">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect.</span></span> <span data-ttu-id="ae2ed-112">Deze gevallen worden algemeen veroorzaakt door toepassingen van derden.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-112">These cases are generally caused by third-party applications.</span></span> <span data-ttu-id="ae2ed-113">Het is doorgaans slechts een beschadiging in de zin dat de gebruiker het als beschadigd weergeeft.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-113">It's generally only corruption in the sense that the user views it as corruption.</span></span> <span data-ttu-id="ae2ed-114">De Exchange Store beschouwt de transactie die de logische beschadiging heeft gemaakt voor een reeks geldige MAPI-bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-114">The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations.</span></span> <span data-ttu-id="ae2ed-115">De functies voor [in-place bewaring](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) in Exchange Online bieden beveiliging tegen logische beschadiging van de opslag (omdat hierdoor wordt voorkomen dat inhoud permanent wordt verwijderd door een gebruiker of toepassing).</span><span class="sxs-lookup"><span data-stu-id="ae2ed-115">The [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="ae2ed-116">Exchange Online voert diverse consistentiecontroles uit op gerepliceerde logboekbestanden tijdens de controle van beide gebeurtenissen en logboek herhaling.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-116">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay.</span></span> <span data-ttu-id="ae2ed-117">Met deze consistentiecontroles wordt voorkomen dat fysiek beschadigd door het systeem wordt gerepliceerd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-117">These consistency checks prevent physical corruption from being replicated by the system.</span></span> <span data-ttu-id="ae2ed-118">Tijdens de inspectie van een logboek is er bijvoorbeeld een fysieke integriteitscontrole waarmee het logboekbestand wordt gecontroleerd en gevalideerd dat de controlesom die in het logboekbestand is opgenomen, overeenkomt met de in het geheugen gemaakte controlesom.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-118">For example, during log inspection, there is a physical integrity check which verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory.</span></span> <span data-ttu-id="ae2ed-119">Daarnaast wordt de header van het logboekbestand onderzocht, zodat u zeker weet dat de handtekening van het logboekbestand in de logboek header overeenkomt met die van het logboekbestand.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-119">In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file.</span></span> <span data-ttu-id="ae2ed-120">Tijdens het opnieuw afspelen van het logboek wordt het logboekbestand verder onderzocht.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-120">During log replay, the log file undergoes further scrutiny.</span></span> <span data-ttu-id="ae2ed-121">De koptekst van een database bevat bijvoorbeeld de logboekhandtekening die wordt vergeleken met de handtekening van het logboekbestand om ervoor te zorgen dat deze overeenkomen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-121">For example, the database header also contains the log signature which is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="ae2ed-122">Beveiliging tegen beschadiging van postvakgegevens in Exchange Online wordt behaald met behulp van Exchange native Data Protection, een tolerantie strategie waarmee de replicatie op basis van toepassingen op meerdere servers en meerdere datacenters wordt gebruikt, samen met andere functies waarmee de bescherming van gegevens verloren gaat vanwege corruptie of andere redenen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-122">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons.</span></span> <span data-ttu-id="ae2ed-123">Deze functies zijn ingebouwde functies die worden beheerd door Microsoft of de Exchange Online-toepassing zelf, zoals:</span><span class="sxs-lookup"><span data-stu-id="ae2ed-123">These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="ae2ed-124">Groepen voor gegevensbeschikbaarheid</span><span class="sxs-lookup"><span data-stu-id="ae2ed-124">Data Availability Groups</span></span>](https://docs.microsoft.com/exchange/back-up-email)
- <span data-ttu-id="ae2ed-125">Oplossing voor één bit</span><span class="sxs-lookup"><span data-stu-id="ae2ed-125">Single Bit Correction</span></span> 
- <span data-ttu-id="ae2ed-126">Online database scannen</span><span class="sxs-lookup"><span data-stu-id="ae2ed-126">Online Database Scanning</span></span> 
- <span data-ttu-id="ae2ed-127">Verloren flush detectie</span><span class="sxs-lookup"><span data-stu-id="ae2ed-127">Lost Flush Detection</span></span> 
- <span data-ttu-id="ae2ed-128">Terugzetten op één pagina</span><span class="sxs-lookup"><span data-stu-id="ae2ed-128">Single Page Restore</span></span> 
- <span data-ttu-id="ae2ed-129">Service postvak replicatie</span><span class="sxs-lookup"><span data-stu-id="ae2ed-129">Mailbox Replication Service</span></span> 
- <span data-ttu-id="ae2ed-130">Controle van logboekbestanden</span><span class="sxs-lookup"><span data-stu-id="ae2ed-130">Log File Checks</span></span> 
- <span data-ttu-id="ae2ed-131">Implementatie in het robuuste bestandssysteem</span><span class="sxs-lookup"><span data-stu-id="ae2ed-131">Deployment on Resilient File System</span></span> 

<span data-ttu-id="ae2ed-132">Voor meer informatie over de hierboven genoemde functies die hierboven worden vermeld, klikt u op de bovenstaande hyperlinks en zie hieronder voor meer informatie en voor meer informatie over items zonder hyperlinks.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-132">For more information on the native features listed above, click on the above hyperlinks, and see below for additional information and for details on items without hyperlinks.</span></span> <span data-ttu-id="ae2ed-133">Naast deze interne functies bevat Exchange Online ook functies voor gegevens tolerantie die klanten kunnen beheren, zoals:</span><span class="sxs-lookup"><span data-stu-id="ae2ed-133">In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="ae2ed-134">Eenmalige artikel herstel (standaard ingeschakeld)</span><span class="sxs-lookup"><span data-stu-id="ae2ed-134">Single Item Recovery (enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="ae2ed-135">Bewaren en ter plaatse bewaren</span><span class="sxs-lookup"><span data-stu-id="ae2ed-135">In-Place Hold and Litigation Hold</span></span>](https://docs.microsoft.com/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="ae2ed-136">Verwijderde Bewaar en verwijderde postvakken (beide standaard ingeschakeld)</span><span class="sxs-lookup"><span data-stu-id="ae2ed-136">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="ae2ed-137">Database Beschikbaarheidsgroepen</span><span class="sxs-lookup"><span data-stu-id="ae2ed-137">Database Availability Groups</span></span> 
<span data-ttu-id="ae2ed-138">Elke postvakdatabase in Microsoft 365 wordt gehost in een [database Availability Group (dag)](https://docs.microsoft.com/exchange/back-up-email) en wordt gerepliceerd naar geografisch afzonderlijke datacenters in dezelfde regio.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-138">Every mailbox database in Microsoft 365 is hosted in a [database availability group (DAG)](https://docs.microsoft.com/exchange/back-up-email) and replicated to geographically-separate datacenters within the same region.</span></span> <span data-ttu-id="ae2ed-139">De meest voorkomende configuratie bevat vier databasekopieën in vier datacenters. Sommige regio's hebben echter minder datacenters (databases worden gerepliceerd naar drie datacenters in India en twee databases in Australië en Japan).</span><span class="sxs-lookup"><span data-stu-id="ae2ed-139">The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan).</span></span> <span data-ttu-id="ae2ed-140">In alle gevallen bevat elke postvakdatabase vier kopieën die in meerdere datacenters zijn verdeeld, zodat de gegevens van het postvak niet worden beveiligd tegen software-, hardware-en zelfs datacenter storingen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-140">But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="ae2ed-141">Bij deze vier kopieën zijn drie de versies geconfigureerd als in de hoogst beschikbare versies.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-141">Out of these four copies, three of them are configured as highly available.</span></span> <span data-ttu-id="ae2ed-142">De vierde kopie is geconfigureerd als een [betraagd database exemplaar](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies).</span><span class="sxs-lookup"><span data-stu-id="ae2ed-142">The fourth copy is configured as a [lagged database copy](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies).</span></span> <span data-ttu-id="ae2ed-143">De kopie van de gewilde database is niet bedoeld voor herstel van een apart Postvak of voor herstel van postvakken.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-143">The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery.</span></span> <span data-ttu-id="ae2ed-144">Het doel is een herstel mechanisme te verschaffen voor het zeldzame geval van een System-Wide, onherstelbare logische beschadiging.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-144">Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="ae2ed-145">Onzichtbare databasekopieën in Exchange Online worden geconfigureerd met een vertragingstijd voor het opnieuw afspelen van logboekbestanden van zeven dagen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-145">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time.</span></span> <span data-ttu-id="ae2ed-146">Daarnaast is de functie voor het opnieuw instellen van het Exchange-herhalings beheer ingeschakeld voor het afspelen van een dynamisch logboekbestand voor beschadigde kopieën, zodat de groei van databasekopieën kan worden hersteld en de groei van logboekbestanden kan worden hersteld.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-146">In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth.</span></span> <span data-ttu-id="ae2ed-147">Hoewel het maken van databasekopieën in Exchange Online wordt gebruikt, is het belangrijk dat u begrijpt dat ze geen gegarandeerde back-up van de tijd zijn.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-147">Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup.</span></span> <span data-ttu-id="ae2ed-148">Onzichtbare databasekopieën in Exchange Online hebben een beschikbaarheids drempel, meestal rond 90%, omdat de schijf met een onzichtbare kopie verloren gaat als gevolg van de schijfstoring, de geraakte kopie wordt een zeer beschikbare kopie en de perioden waarin de ongebruikte databasekopie opnieuw wordt samengesteld.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-148">Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly-available copy (due to automatic play down), as well as the periods where the lagged database copy is re-building the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="ae2ed-149">Transport tolerantie</span><span class="sxs-lookup"><span data-stu-id="ae2ed-149">Transport Resilience</span></span> 
<span data-ttu-id="ae2ed-150">Exchange Online bevat twee primaire transport functies voor de kracht van een transport: schaduw-en veiligheids netwerk.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-150">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net.</span></span> <span data-ttu-id="ae2ed-151">Met schaduw herstel houdt u een overbodige kopie van een bericht in de transit.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-151">Shadow Redundancy keeps a redundant copy of a message while it is in transit.</span></span> <span data-ttu-id="ae2ed-152">Beveiligings netwerk houdt een overtollige kopie van een bericht op dat de bezorging van het bericht is afgeleverd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-152">Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="ae2ed-153">Met schaduw redundantie maakt elke Exchange Online-Transport Server een kopie van elk bericht dat wordt ontvangen voordat het bericht naar de verzendende server wordt verzonden.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-153">With Shadow Redundancy, each Exchange Online transport server makes a copy of each message it receives before it acknowledges successfully receiving the message to the sending server.</span></span> <span data-ttu-id="ae2ed-154">Hiermee zorgt u ervoor dat alle berichten in de transport pijplijn overbodig worden in de transit.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-154">This makes all messages in the transport pipeline redundant while in transit.</span></span> <span data-ttu-id="ae2ed-155">Als in Exchange Online wordt bepaald dat het oorspronkelijke bericht in transit verloren is gegaan, wordt een overtollige kopie van het bericht opnieuw bezorgd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-155">If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="ae2ed-156">Veiligheid netwerk is een transport wachtrij die is gekoppeld aan de transportservice op een mailbox-server.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-156">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server.</span></span> <span data-ttu-id="ae2ed-157">Deze wachtrij bevat kopieën van berichten die zijn verwerkt door de server.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-157">This queue stores copies of messages that were successfully processed by the server.</span></span> <span data-ttu-id="ae2ed-158">Wanneer een postvakdatabase of serverfout het activeren van een verouderde versie van de postvakdatabase vereist, worden berichten in de netwerkwachtrij voor veiligheid automatisch opnieuw verzonden naar de nieuwe actieve kopie van de postvakdatabase.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-158">When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database.</span></span> <span data-ttu-id="ae2ed-159">Het nettovermogen van de veiligheid is ook overbodig, zodat transport niet als één moment van storing wordt veroorzaakt.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-159">Safety Net is also redundant, thereby eliminating transport as a single point of failure.</span></span> <span data-ttu-id="ae2ed-160">Met het concept van een primair veiligheids netwerk en een Spellings veiligheids netwerk in de vorm van het primaire veiligheids netwerk is het niet mogelijk om meer dan 12 uur, moet u opnieuw een aanvraag indienen voor het opnieuw verzenden van berichten, en worden de berichten opnieuw geleverd via het internet.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-160">It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are re-delivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="ae2ed-161">Berichten worden opnieuw ingediend via het actieve beheeronderdeel van de Microsoft Exchange-service voor het beheren van DAGs-en postvakdatabase kopieën.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-161">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies.</span></span> <span data-ttu-id="ae2ed-162">U hoeft geen handmatige acties te ondernemen voor het opnieuw verzenden van berichten via het veiligheid-net.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-162">No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="ae2ed-163">Oplossing voor één bit</span><span class="sxs-lookup"><span data-stu-id="ae2ed-163">Single Bit Correction</span></span> 
<span data-ttu-id="ae2ed-164">ESE omvat een mechanisme voor het detecteren en oplossen van eenmalige CRC-fouten (aka enkele-bits gespiegelde) die het resultaat zijn van hardwarefouten (en omdat ze fysiek corruptie weergeven).</span><span class="sxs-lookup"><span data-stu-id="ae2ed-164">ESE includes a mechanism to detect and resolve single-bit CRC errors (aka single-bit flips) that are the result of hardware errors (and as such they represent physical corruption).</span></span> <span data-ttu-id="ae2ed-165">Wanneer deze fouten optreden, worden deze automatisch door ESE verholpen en wordt een gebeurtenis in het logboek logboek vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-165">When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="ae2ed-166">Online database scannen</span><span class="sxs-lookup"><span data-stu-id="ae2ed-166">Online Database Scanning</span></span> 
<span data-ttu-id="ae2ed-167">Online database scan (ook wel *databases*toevoegen) is het proces waarbij een ESE een databaseconsistentie controle gebruikt om elke pagina te lezen en de beschadigde pagina's te controleren.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-167">Online database scanning (also known as *database checksumming*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption.</span></span> <span data-ttu-id="ae2ed-168">Het belangrijkste doel is fysieke beschadiging en verloren vermiste leegmaak opdrachten op te sporen die mogelijk niet door transacties worden gedetecteerd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-168">The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations.</span></span> <span data-ttu-id="ae2ed-169">Met het scannen van databases worden ook crash activiteiten na de opslag uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-169">Database scanning also performs post-store crash operations.</span></span> <span data-ttu-id="ae2ed-170">De ruimte kan worden gelekt vanwege vastlopen en bij het scannen van online databases wordt verloren ruimte gevonden en hersteld.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-170">Space can be leaked due to crashes, and online database scanning finds and recovers lost space.</span></span> <span data-ttu-id="ae2ed-171">Het systeem is zo ontworpen dat elke database telkens eenmaal zeven dagen volledig wordt gescand.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-171">The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="ae2ed-172">Verloren flush detectie</span><span class="sxs-lookup"><span data-stu-id="ae2ed-172">Lost Flush Detection</span></span> 
<span data-ttu-id="ae2ed-173">Een verloren Flushing doet zich voor wanneer een database schrijven en het besturingssysteem die als voltooid is geretourneerd, niet naar de schijf is geschreven of op de verkeerde locatie is geschreven.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-173">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location.</span></span> <span data-ttu-id="ae2ed-174">Verloren flush-incidenten kunnen resulteren in een logische beschadiging van de database, zodat verloren gegane gegevens verloren gaan, zodat geraakte gegevens verloren gaan, aangezien ESE een verloren flush detectiemechanisme omvat.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-174">Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism.</span></span> <span data-ttu-id="ae2ed-175">Als databasepagina's zijn geschreven naar passieve kopieën, wordt een controle uitgevoerd voor verloren gegane verplaatsingen op de actieve kopie.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-175">As database pages are written to passive copies, a check is performed for lost flushes on the active copy.</span></span> <span data-ttu-id="ae2ed-176">Als een verloren leegmaak actie is gedetecteerd, kan ESE het proces met een patch proces voor pagina's herstellen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-176">If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="ae2ed-177">Terugzetten op één pagina</span><span class="sxs-lookup"><span data-stu-id="ae2ed-177">Single Page Restore</span></span> 
<span data-ttu-id="ae2ed-178">Het herstellen van enkele pagina's, aka *pagina patches*is een automatisch proces waarbij beschadigde databasepagina's worden vervangen door gezonde kopieën van een gezonde replica.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-178">Single page restore, aka *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica.</span></span> <span data-ttu-id="ae2ed-179">Het herstelproces voor een beschadigde pagina is afhankelijk van het feit of de database-kopie actief of passief is.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-179">The repair process for a corrupt page depends on whether the database copy is active or passive.</span></span> <span data-ttu-id="ae2ed-180">Wanneer een kopie van een actieve database een beschadigde pagina tegenkomt, kan deze een pagina uit een van de replica's kopiëren, op voorwaarde dat de gekopieerde pagina compleet is.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-180">When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is completely up-to-date.</span></span> <span data-ttu-id="ae2ed-181">Dit doet u door een aanvraag voor de pagina in de logboek stroom te plaatsen, dat wil zeggen de basis van de replicatie van de postvakdatabase.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-181">This is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication.</span></span> <span data-ttu-id="ae2ed-182">Zodra een replica een aanvraag voor de pagina bevindt, reageert de pagina en stuurt u een kopie van de pagina naar de aanvraag voor het aanvragen van een database.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-182">As soon as a replica encounters the page request it responds by sending a copy of the page to the requesting database copy.</span></span> <span data-ttu-id="ae2ed-183">Herstel via één pagina biedt ook een asynchroon communicatie mechanisme waarmee een pagina wordt opgevraagd bij replica's, zelfs als de replica's momenteel offline zijn.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-183">Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="ae2ed-184">Als een database beschadigd is en een kopie met een ongebruikte database wordt opgeslagen, kunt u een willekeurige pagina altijd veilig kopiëren van de actieve kopie naar een passieve kopie.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-184">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy.</span></span> <span data-ttu-id="ae2ed-185">Een passieve databasekopie is zo sterk beschikbaar, dus tijdens het patchings proces van de pagina wordt het opnieuw afspelen van het logboek stopgezet en wordt het kopiëren van gebeurtenissen voortgezet.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-185">A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues.</span></span> <span data-ttu-id="ae2ed-186">Met de passieve databasekopie wordt een kopie van de beschadigde pagina van de actieve versie opgehaald en gewacht tot het logboekbestand voldoet aan de vereiste vereiste logboekgeneratie, en vervolgens wordt de beschadigde pagina op een andere pagina opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-186">The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file which meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page.</span></span> <span data-ttu-id="ae2ed-187">Meld u opnieuw aan bij het aanmelden bij de pagina.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-187">Once the page has been patched, log replay resumes.</span></span> <span data-ttu-id="ae2ed-188">Het proces is hetzelfde voor het onzichtbare database exemplaar, met uitzondering van de gestorete database voor het eerst alle logboekbestanden die nodig zijn om een patch te verkrijgen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-188">The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="ae2ed-189">Service postvak replicatie</span><span class="sxs-lookup"><span data-stu-id="ae2ed-189">Mailbox Replication Service</span></span> 
<span data-ttu-id="ae2ed-190">Postvakken verplaatsen is een belangrijk onderdeel van het beheren van een grootschalige e-mail service.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-190">Moving mailboxes is a key part of managing a large-scale email service.</span></span> <span data-ttu-id="ae2ed-191">Er zijn altijd updates voor technologieën en de hardware en versie van upgrades voor het oplossen van problemen, zodat onze ingenieurs een krachtig en vertraagd systeem kan uitvoeren, zodat onze technici deze werk doorzichtig kunnen maken (door ervoor te zorgen dat de gegevens in de hele procedure online blijven) de juiste manier van werken.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-191">There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="ae2ed-192">De Exchange Mailbox Replication-service (MEVR) is verantwoordelijk voor het verplaatsen van postvakken tussen databases.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-192">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases.</span></span> <span data-ttu-id="ae2ed-193">Tijdens de verhuizing voert MEVR een consistentiecontrole uit op alle items in het postvak.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-193">During the move, MRS performs a consistency check on all items within the mailbox.</span></span> <span data-ttu-id="ae2ed-194">Als het probleem zich voordoet, kunt u het probleem verhelpen door MEVR te raken of de beschadigde items over te slaan.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-194">If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="ae2ed-195">Aangezien MEVR een onderdeel is van Exchange Online, kunnen we wijzigingen in de code aanbrengen om nieuwe vormen van beschadigingen die in de toekomst worden gedetecteerd, op te lossen.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-195">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future.</span></span> <span data-ttu-id="ae2ed-196">Als we bijvoorbeeld een consistent probleem detecteren dat MEVR niet mogelijk is te herstellen, kunnen we de beschadiging analyseren, de gemevre code wijzigen en de inconsistentie corrigeren (als we weten wat u wilt doen).</span><span class="sxs-lookup"><span data-stu-id="ae2ed-196">For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="ae2ed-197">Controle van logboekbestanden</span><span class="sxs-lookup"><span data-stu-id="ae2ed-197">Log File Checks</span></span> 
<span data-ttu-id="ae2ed-198">Alle logbestanden met transactielogbestanden die zijn gegenereerd door een Exchange-database, worden in diverse vormen van consistentiecontroles uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-198">All transaction log files generated by an Exchange database undergo several forms of consistency checks.</span></span> <span data-ttu-id="ae2ed-199">Wanneer een logboekbestand wordt gemaakt, wordt het eerste patroon gemaakt en wordt een reeks logboeken uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-199">When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed.</span></span> <span data-ttu-id="ae2ed-200">Hiermee kan Exchange Online een aantal controles uitvoeren (Flush, CRC en andere controles) voor het valideren van elk logboekbestand terwijl het wordt vastgelegd, en opnieuw wanneer het wordt gerepliceerd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-200">This enables Exchange Online to execute a series of checks (lost flush, CRC and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="ae2ed-201">Implementatie in het robuuste bestandssysteem</span><span class="sxs-lookup"><span data-stu-id="ae2ed-201">Deployment on Resilient File System</span></span> 
<span data-ttu-id="ae2ed-202">Om te voorkomen dat een bestand op het bestandssysteem wordt beschadigd, wordt Exchange Online geïmplementeerd op een programma voor een flexibele bestandssysteem (ReFS) voor betere herstelmogelijkheden.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-202">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities.</span></span> <span data-ttu-id="ae2ed-203">ReFS is een bestandssysteem in Windows Server 2012 en hoger, dat is ontworpen om krachtigere gegevens te bieden tegen beschadiging en de beschikbaarheid en integriteit van gegevens te optimaliseren.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-203">ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity.</span></span> <span data-ttu-id="ae2ed-204">Met name zorgt ReFS voor een betere beveiliging van de manier waarop metagegevens worden bijgewerkt, wat betere bescherming biedt voor gegevens en de schade van beschadigde gegevens vermindert.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-204">Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases.</span></span> <span data-ttu-id="ae2ed-205">Er worden ook controlefuncties gebruikt om de integriteit van bestandsgegevens en metagegevens te controleren, zodat beschadigde gegevens gemakkelijk kunnen worden gevonden en hersteld.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-205">It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="ae2ed-206">Exchange Online profiteert van diverse ReFS-voordelen:</span><span class="sxs-lookup"><span data-stu-id="ae2ed-206">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="ae2ed-207">Meer tolerantie voor de integriteit van gegevens betekent minder gegevensbeschadiging.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-207">More resiliency in data integrity means fewer data corruption incidents.</span></span> <span data-ttu-id="ae2ed-208">Verminderen van het aantal beschadigde incidenten betekent dat u minder onnodige database-inhoudings zaden hoeft te maken.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-208">Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="ae2ed-209">Checksum voert de detectie van beschadigings problemen sneller en verder deterministisch in, zodat ons de hoeveelheid gegevens van klanten kan repareren voordat grijs fouten zich voordoen op gegevensvolumes.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-209">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="ae2ed-210">Ontworpen om goed te werken met extreem grote gegevenssets, petabytes en groter, zonder gevolgen voor de prestaties</span><span class="sxs-lookup"><span data-stu-id="ae2ed-210">Designed to work well with extremely large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="ae2ed-211">Ondersteuning voor andere functies die door Exchange Online worden gebruikt, zoals BitLocker-versleuteling.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-211">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="ae2ed-212">Exchange Online profiteert ook van andere ReFS-functies:</span><span class="sxs-lookup"><span data-stu-id="ae2ed-212">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="ae2ed-213">**Integriteit (integriteits gegevens)** -ReFS slaat gegevens op een andere manier op, zodat deze te beschermen tegen een groot aantal veelvoorkomende fouten die tot gevolg kunnen hebben dat gegevens verloren gaan.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-213">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss.</span></span> <span data-ttu-id="ae2ed-214">In Microsoft 365 Search wordt gebruikgemaakt van integriteits stromen voor de detectie en controle van de inhoud van de oudere schijf.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-214">Microsoft 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content.</span></span> <span data-ttu-id="ae2ed-215">Met de functie worden ook beschadigings problemen vertraagd als gevolg van afgebroken schrijfbewerkingen (wanneer een schrijfbewerking niet wordt voltooid vanwege verouderings kracht, enzovoort).</span><span class="sxs-lookup"><span data-stu-id="ae2ed-215">The feature also reduces corruption incidents caused by “Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="ae2ed-216">**Beschikbaarheid (restwaarde)** : ReFS doet de beschikbaarheid van gegevens.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-216">**Availability (Salvage)** - ReFS prioritizes the availability of data.</span></span> <span data-ttu-id="ae2ed-217">Historisch: bestandssystemen waren vaak gevoelig voor beschadigde gegevens, waarvoor het systeem offline werd gebruikt voor herstel.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-217">Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair.</span></span> <span data-ttu-id="ae2ed-218">Hoewel dit niet het geval is, kan de ReFS, indien beschadigd, worden gebruikt door ReFS, een functie waarmee de beschadigde gegevens uit de naamruimte op een live volume worden verwijderd en ervoor zorgt dat goede gegevens niet nadelig worden beïnvloed door niet-herstelbare beschadigde gegevens.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-218">Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data.</span></span> <span data-ttu-id="ae2ed-219">Als u de functie rest. na toepast en beschadigde gegevens opisoleert voor Exchange Online-database volumes, kunnen we niet-getroffen databases op een beschadigd volume bewaren tussen de tijd van beschadigd raken en de reparatieactie.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-219">Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action.</span></span> <span data-ttu-id="ae2ed-220">Hierdoor wordt de beschikbaarheid van databases die normaal gevolgen voor beschadigde schijfproblemen beïnvloed, verhoogd.</span><span class="sxs-lookup"><span data-stu-id="ae2ed-220">This increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 